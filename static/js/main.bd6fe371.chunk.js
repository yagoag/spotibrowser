(this["webpackJsonpspotify-browser"]=this["webpackJsonpspotify-browser"]||[]).push([[0],{108:function(e){e.exports=JSON.parse('[{"id":"country","name":"Country","default":{"label":"United States","value":"US"},"values":[{"label":"Algeria","value":"DZ"},{"label":"Andorra","value":"AD"},{"label":"Argentina","value":"AR"},{"label":"Australia","value":"AU"},{"label":"Austria","value":"AT"},{"label":"Bahrain","value":"BH"},{"label":"Belgium","value":"BE"},{"label":"Bolivia","value":"BO"},{"label":"Brazil","value":"BR"},{"label":"Bulgaria","value":"BG"},{"label":"Canada","value":"CA"},{"label":"Chile","value":"CL"},{"label":"Colombia","value":"CO"},{"label":"Costa Rica","value":"CR"},{"label":"Cyprus","value":"CY"},{"label":"Czech Republic","value":"CZ"},{"label":"Denmark","value":"DK"},{"label":"Dominican Republic","value":"DO"},{"label":"Ecuador","value":"EC"},{"label":"Egypt","value":"EG"},{"label":"El Salvador","value":"SV"},{"label":"Estonia","value":"EE"},{"label":"Finland","value":"FI"},{"label":"France","value":"FR"},{"label":"Germany","value":"DE"},{"label":"Greece","value":"GR"},{"label":"Guatemala","value":"GT"},{"label":"Honduras","value":"HN"},{"label":"Hong Kong","value":"HK"},{"label":"Hungary","value":"HU"},{"label":"Iceland","value":"IS"},{"label":"India","value":"IN"},{"label":"Indonesia","value":"ID"},{"label":"Ireland","value":"IE"},{"label":"Israel","value":"IL"},{"label":"Italy","value":"IT"},{"label":"Japan","value":"JP"},{"label":"Jordan","value":"JO"},{"label":"Kuwait","value":"KW"},{"label":"Latvia","value":"LV"},{"label":"Lebanon","value":"LB"},{"label":"Liechtenstein","value":"LI"},{"label":"Lithuania","value":"LT"},{"label":"Luxembourg","value":"LU"},{"label":"Malaysia","value":"MY"},{"label":"Malta","value":"MT"},{"label":"Mexico","value":"MX"},{"label":"Monaco","value":"MC"},{"label":"Morocco","value":"MA"},{"label":"Netherlands","value":"NL"},{"label":"New Zealand","value":"NZ"},{"label":"Nicaragua","value":"NI"},{"label":"Norway","value":"NO"},{"label":"Oman","value":"OM"},{"label":"Palestine","value":"PS"},{"label":"Panama","value":"PA"},{"label":"Paraguay","value":"PY"},{"label":"Peru","value":"PE"},{"label":"Philippines","value":"PH"},{"label":"Poland","value":"PL"},{"label":"Portugal","value":"PT"},{"label":"Qatar","value":"QA"},{"label":"Romania","value":"RO"},{"label":"Saudi Arabia","value":"SA"},{"label":"Singapore","value":"SG"},{"label":"Slovakia","value":"SK"},{"label":"South Africa","value":"ZA"},{"label":"Spain","value":"ES"},{"label":"Sweden","value":"SE"},{"label":"Switzerland","value":"CH"},{"label":"Taiwan","value":"TW"},{"label":"Thailand","value":"TH"},{"label":"Tunisia","value":"TN"},{"label":"Turkey","value":"TR"},{"label":"United Arab Emirates","value":"AE"},{"label":"United Kingdom","value":"GB"},{"label":"United States","value":"US"},{"label":"Uruguay","value":"UY"},{"label":"Vietnam","value":"VN"}]},{"id":"timestamp","name":"Date and Time","validation":{"primitiveType":"STRING","entityType":"DATE_TIME","pattern":"yyyy-MM-ddTHH:mm:ss"}}]')},118:function(e,a,t){e.exports=t(241)},127:function(e,a,t){},146:function(e,a,t){},147:function(e,a,t){},148:function(e,a,t){},193:function(e,a,t){},194:function(e,a,t){},195:function(e,a,t){},238:function(e,a,t){},239:function(e,a,t){},240:function(e,a,t){},241:function(e,a,t){"use strict";t.r(a);var l=t(1),n=t.n(l),r=t(5),c=t.n(r),i=t(4),s=t(6),u=t(77),o=t(11),m=t.n(o),f=(t(127),t(30)),v=t.n(f),b=t(8),d=t(31),p=t.n(d);function E(e){return{type:g,playlist:e}}function h(e){return{type:O,value:e}}var g="SET_ACTIVE_PLAYLIST",y="SET_FILTERS",O="SET_AUTO_REFRESH",N=(t(146),function(e){var a=e.playlist,t=Object(s.b)(),l=Object(s.c)((function(e){return e.activePlaylist}));return n.a.createElement("div",{className:"playlist".concat(l?" playlist-small":"").concat(l&&a&&a.id===l.id?" active":""),onClick:function(){return t(E(a))}},a?n.a.createElement("img",{src:a.images[0].url,width:"64px",height:"64px",alt:a.name}):n.a.createElement(m.a,{width:"64px",height:"64px"}),n.a.createElement("div",{className:"info"},n.a.createElement("div",{className:"name"},a?a.name:n.a.createElement(m.a,{width:Math.floor(60*Math.random()+61)+"px"})),a?n.a.createElement("div",null,"By ",n.a.createElement("span",{className:"owner"},a.owner.display_name)):n.a.createElement(m.a,{width:"60px"}),n.a.createElement("div",null,a?"".concat(a.tracks.total," song").concat(a.tracks.total>1?"s":""):n.a.createElement(m.a,{width:"55px"}))))}),j=t(75),k=(t(147),function(e){var a=e.offset,t=e.limit,r=e.total,c=e.setOffset,s=e.setLimit,u=e.small,o=Object(l.useState)(null),m=Object(i.a)(o,2),f=m[0],v=m[1];return n.a.createElement("div",{className:"pagination".concat(u?" small":"")},n.a.createElement(j.a,{onClick:function(){return a>=t-1&&c(a-t)},className:"arrow"+(a<t-1?" disabled":"")}),n.a.createElement("span",{className:"page-info"},"Page",n.a.createElement("div",{className:"input"},n.a.createElement("input",{type:"text",className:"page-number",value:f||Math.ceil(a/t)+1,onChange:function(e){isNaN(parseInt(e.target.value))?v(e.target.value):(c((e.target.value-1)*t),v(null))}}))," of ".concat(Math.ceil(r/t))),n.a.createElement(j.b,{onClick:function(){return a<r-t&&c(a+t)},className:"arrow ".concat(a>=r-t?" disabled":"")}),n.a.createElement("span",{className:"page-limit"}," | ",n.a.createElement("div",{className:"input"},n.a.createElement("select",{className:"items-per-page",value:t,onChange:function(e){return s(e.target.value)}},n.a.createElement("option",{value:"5"},"5"),n.a.createElement("option",{value:"10"},"10"),n.a.createElement("option",{value:"20"},"20"),n.a.createElement("option",{value:"30"},"30"),n.a.createElement("option",{value:"40"},"40"),n.a.createElement("option",{value:"50"},"50")))," ","items per page"))}),S=(t(148),function(e){var a=e.setUnauthorized,t=e.accessToken,r=Object(l.useState)(""),c=Object(i.a)(r,2),u=c[0],o=c[1],m=Object(l.useState)([]),f=Object(i.a)(m,2),d=f[0],E=f[1],h=Object(l.useState)(!1),g=Object(i.a)(h,2),y=g[0],O=g[1],j=Object(l.useState)(5),S=Object(i.a)(j,2),T=S[0],w=S[1],_=Object(l.useState)(0),A=Object(i.a)(_,2),C=A[0],I=A[1],P=Object(l.useState)(0),R=Object(i.a)(P,2),x=R[0],L=R[1],U=Object(s.c)((function(e){return e.activePlaylist})),M=Object(s.c)((function(e){return e.filters})),B=Object(s.c)((function(e){return e.autoRefresh}));Object(l.useEffect)((function(){var e=function(){return v.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:O(!0),t&&p.a.get("https://api.spotify.com/v1/browse/featured-playlists",{params:Object(b.a)({},M,{offset:C,limit:T}),headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){o(e.data.message),E(e.data.playlists.items),L(e.data.playlists.total)})).catch((function(e){a(!0)})).finally((function(){O(!1)}));case 2:case"end":return e.stop()}}))};if(e(),B){var l=setInterval((function(){e()}),3e4);return function(){return clearInterval(l)}}}),[M,T,C,a,t,B]),Object(l.useEffect)((function(){I(0)}),[M]);var H=[];if(y)for(var z=0;z<T;z++)H.push(z);return n.a.createElement("div",{className:"playlist-container".concat(U?" active-playlist":"")},n.a.createElement("div",{className:"title"},u),n.a.createElement(k,{offset:C,limit:T,total:x,setOffset:I,setLimit:w,small:!!U}),y?H.map((function(e){return n.a.createElement(N,{key:e})})):d.map((function(e){return n.a.createElement(N,{key:e.id,playlist:e,active:U})})),n.a.createElement(k,{offset:C,limit:T,total:x,setOffset:I,setLimit:w,small:!!U}))}),T=t(116),w={menu:function(e){return Object(b.a)({},e,{color:"#000000"})},control:function(e){return Object(b.a)({},e,{border:"none",boxShadow:"none",minHeight:"unset"})},indicatorsContainer:function(e){return Object(b.a)({},e,{margin:0,padding:0,paddingLeft:"4px"})},indicatorSeparator:function(e){return Object(b.a)({},e,{margin:"4px 0"})},input:function(e){return Object(b.a)({},e,{margin:0,padding:0})},dropdownIndicator:function(e){return Object(b.a)({},e,{padding:0,paddingLeft:"4px"})},option:function(e,a){return Object(b.a)({},e,{backgroundColor:a.isSelected?"#1db954":a.isFocused&&"#1db95433",cursor:"pointer"})}},_=function(e){var a=e.id,t=e.values,l=e.onChange,r=e.defaultValue;return n.a.createElement(T.a,{name:a,options:t,defaultValue:r,isSearchable:!0,onChange:function(e){return l({target:{id:a,value:e.value}})},styles:w})},A=t(107),C=t.n(A),I=(t(193),function(e,a){if("INTEGER"===a.primitiveType){var t=parseInt(e);if(!/^\d*$/.test(e))throw new Error("must be an integer");if(a.min&&t<a.min)throw new Error("must be at least "+a.min);if(a.max&&t>a.max)throw new Error("must be at most "+a.max)}}),P=function(e){var a=e.id,t=e.name,l=e.validation,r=e.value,c=e.onChange,i=e.setError,u=Object(s.b)();return"entityType"in l&&"DATE_TIME"===l.entityType?n.a.createElement(C.a,{value:r,onChange:function(e){u(h(!e)),c({target:{id:a,value:e}})}}):n.a.createElement("input",{type:"INTEGER"===l.primitiveType?"number":"text",id:a,value:r||"",onChange:function(e){try{I(e.target.value,l),i(null)}catch(a){i(a.message.replace("{name}",t))}finally{c(e)}}})},R=(t(194),function(e){var a=e.definition,t=e.value,r=e.onChange,c=Object(l.useState)(null),s=Object(i.a)(c,2),u=s[0],o=s[1],m={id:a.id,name:a.name,value:t,onChange:r};return n.a.createElement("div",{key:a.id,className:"filter"},n.a.createElement("div",{className:"filter-name"},a.name,n.a.createElement("span",{className:"error-message"}," ",u)),n.a.createElement("div",{className:"filter-input".concat(u?" error":"")},"values"in a?n.a.createElement(_,Object.assign({values:a.values,defaultValue:a.default},m)):n.a.createElement(P,Object.assign({validation:a.validation,setError:o},m))))}),x=t(108),L=(t(195),function(e){var a=e.visible,t=Object(s.c)((function(e){return e.filters})),l=Object(s.c)((function(e){return e.autoRefresh})),r=Object(s.b)(),c=function(e){var a=Object(b.a)({},t);a[e.target.id]=e.target.value,r(function(e){return{type:y,filters:e}}(a))};return n.a.createElement("div",{className:"filter-panel"+(a?" visible":"")},x.map((function(e){return n.a.createElement(R,{key:e.id,definition:e,value:t[e.id],onChange:c})})),n.a.createElement("div",{className:"auto-refresh"},n.a.createElement("input",{type:"checkbox",checked:l,onChange:function(e){r(h(e.target.checked))}})," ","Enable auto-refresh"))}),U=t(115),M=t(117),B=(t(238),function(e){return e<1e3?e:e<1e6?Math.round(e/1e3)+"K":Math.round(e/1e6)+"M"}),H=function(e){var a=e.name,t=e.url,r=e.accessToken,c=e.setUnauthorized,s=Object(l.useState)(null),u=Object(i.a)(s,2),o=u[0],f=u[1];return Object(l.useEffect)((function(){v.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:t&&p.a.get(t,{headers:{Authorization:"Bearer ".concat(r)}}).then((function(e){f(e.data)})).catch((function(e){401===e.response.status&&c(!0)}));case 1:case"end":return e.stop()}}))}),[t,r,c]),n.a.createElement("div",{className:"artist-container"},o?n.a.createElement("img",{className:"artist-picture",src:o.images[0].url,alt:o.name}):n.a.createElement("div",{className:"artist-picture"},n.a.createElement(m.a,{width:"64px",height:"64px"})),n.a.createElement("div",{className:"artist-details"},n.a.createElement("div",{className:"artist-name"},a||o.name),n.a.createElement("div",{className:"artist-followers"},o?"".concat(B(o.followers.total)," followers"):n.a.createElement(m.a,{width:"88px"})),o?n.a.createElement("a",{className:"artist-link spotify-link",href:o.external_urls.spotify,target:"_blank",rel:"noopener noreferrer"},"Open on Spotify"):n.a.createElement(m.a,{width:"113px"})))},z=(t(239),function(e){var a=e.track,t=e.accessToken,l=e.setUnauthorized;return a?n.a.createElement("div",{className:"track"},n.a.createElement("a",{className:"track-title spotify-link white",title:a.name,href:a.external_urls.spotify,target:"_blank",rel:"noopener noreferrer"},"".concat(a.name.substring(0,35)).concat(a.name.length>35?"...":""))," \xb7 ",n.a.createElement("span",{className:"artist-list"},a.artists.map((function(e,r){return n.a.createElement("span",{key:e.id},n.a.createElement(M.a,{placement:"top",trigger:["click"],overlay:n.a.createElement(H,{name:e.name,url:e.href,accessToken:t,setUnauthorized:l})},n.a.createElement("span",{className:"artist"},e.name)),r<a.artists.length-1?", ":"")})))):n.a.createElement("div",{className:"track"},n.a.createElement(m.a,{width:Math.floor(60*Math.random()+31)+"%"}))}),D=(t(240),function(e){var a=e.setUnauthorized,t=e.accessToken,r=Object(l.useState)([]),c=Object(i.a)(r,2),u=c[0],o=c[1],m=Object(l.useState)(0),f=Object(i.a)(m,2),b=f[0],d=f[1],h=Object(l.useState)(!1),g=Object(i.a)(h,2),y=g[0],O=g[1],N=Object(l.useState)(10),j=Object(i.a)(N,2),S=j[0],T=j[1],w=Object(l.useState)(0),_=Object(i.a)(w,2),A=_[0],C=_[1],I=Object(s.c)((function(e){return e.activePlaylist})),P=Object(s.c)((function(e){return e.autoRefresh})),R=Object(s.b)();Object(l.useEffect)((function(){var e=function(){return v.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:O(!0),I&&t&&p.a.get(I.tracks.href,{params:{offset:A,limit:S},headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){o(e.data.items),d(e.data.total)})).catch((function(e){401===e.response.status&&a(!0)})).finally((function(){O(!1)}));case 2:case"end":return e.stop()}}))};if(e(),P){var l=setInterval((function(){e()}),3e4);return function(){return clearInterval(l)}}}),[I,a,t,S,A,P]),Object(l.useEffect)((function(){C(0)}),[I]);var x=[];if(y)for(var L=0;L<S;L++)x.push(L);return I?n.a.createElement("div",{className:"track-container"},n.a.createElement("div",{className:"playlist-info"},n.a.createElement("img",{className:"playlist-image",src:I.images[0].url,alt:I.name}),n.a.createElement("div",{className:"playlist-details"},n.a.createElement("div",{className:"list-link"},n.a.createElement("a",{className:"spotify-link",href:I.external_urls.spotify,target:"_blank",rel:"noopener noreferrer"},"Open on Spotify")),n.a.createElement("div",{className:"playlist-name"},I.name),n.a.createElement("div",{className:"track-count"},"Created by"," ",n.a.createElement("a",{className:"playlist-owner spotify-link white",href:I.owner.external_urls.spotify,target:"_blank",rel:"noopener noreferrer"},I.owner.display_name)," ","\xb7 ",I.tracks.total," songs")),n.a.createElement(U.a,{className:"close-button",onClick:function(){return R(E(null))}})),n.a.createElement("div",{className:"track-list"},y?x.map((function(e){return n.a.createElement(z,{key:e})})):u.filter((function(e){return e.track&&e.track.id})).map((function(e){return n.a.createElement(z,{key:e.track.id,track:e.track,accessToken:t,setUnauthorized:a})}))),n.a.createElement(k,{offset:A,limit:S,total:b,setOffset:C,setLimit:T})):n.a.createElement(n.a.Fragment,null)}),G=t(48),F={activePlaylist:null,filters:{},autoRefresh:!0};var V=Object(G.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case g:return Object(b.a)({},e,{activePlaylist:a.playlist});case y:return Object(b.a)({},e,{filters:a.filters});case O:return Object(b.a)({},e,{autoRefresh:a.value});default:return e}})),K=Object({NODE_ENV:"production",PUBLIC_URL:"/spotibrowser",REACT_APP_SPOTIFY_API_URL:"https://api.spotify.com/v1/browse/featured-playlists",REACT_APP_AUTH_API_URL:"https://accounts.spotify.com/authorize",REACT_APP_CLIENT_ID:"335ec69bb5524ecc86cea8963374de22",REACT_APP_URL:"https://yagoag.github.io/spotibrowser"}),J=(K.REACT_APP_AUTH_API_URL,K.REACT_APP_CLIENT_ID,K.REACT_APP_URL,function(){var e=Object(l.useState)(!1),a=Object(i.a)(e,2),t=a[0],r=a[1],c=Object(l.useState)(!1),m=Object(i.a)(c,2),f=m[0],v=m[1],b=Object(l.useState)(null),d=Object(i.a)(b,2),p=d[0],E=d[1];return Object(l.useEffect)((function(){if(localStorage.getItem("access_token"))E(localStorage.getItem("access_token"));else{var e=window.location.hash.substr(1).split("&").reduce((function(e,a){var t=a.split("=");return e[t[0]]=t[1],e}),{});e.access_token&&(localStorage.setItem("access_token",e.access_token),E(e.access_token))}}),[]),Object(l.useEffect)((function(){f&&localStorage.removeItem("access_token")}),[f]),n.a.createElement(s.a,{store:V},n.a.createElement(o.SkeletonTheme,{color:"#f2f2f2",highlightColor:"#777"},n.a.createElement("div",{className:"App"},n.a.createElement("div",{id:"header"},n.a.createElement("div",{className:"app-title"},"SpotiBrowser"),n.a.createElement("button",{className:"show-filters",onClick:function(){return r(!t)}},"Filters",n.a.createElement("span",{className:"arrow"},t?n.a.createElement(u.b,null):n.a.createElement(u.a,null)))),n.a.createElement(L,{visible:t}),n.a.createElement("div",{id:"contents"},n.a.createElement(S,{setUnauthorized:v,accessToken:p}),n.a.createElement(D,{setUnauthorized:v,accessToken:p})))))});c.a.render(n.a.createElement(J,null),document.getElementById("root"))}},[[118,1,2]]]);
//# sourceMappingURL=main.bd6fe371.chunk.js.map