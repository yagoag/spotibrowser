(window["webpackJsonpspotify-browser"]=window["webpackJsonpspotify-browser"]||[]).push([[0],{110:function(e){e.exports=JSON.parse('[{"id":"country","name":"Country","values":[{"label":"Algeria","value":"DZ"},{"label":"Andorra","value":"AD"},{"label":"Argentina","value":"AR"},{"label":"Australia","value":"AU"},{"label":"Austria","value":"AT"},{"label":"Bahrain","value":"BH"},{"label":"Belgium","value":"BE"},{"label":"Bolivia","value":"BO"},{"label":"Brazil","value":"BR"},{"label":"Bulgaria","value":"BG"},{"label":"Canada","value":"CA"},{"label":"Chile","value":"CL"},{"label":"Colombia","value":"CO"},{"label":"Costa Rica","value":"CR"},{"label":"Cyprus","value":"CY"},{"label":"Czech Republic","value":"CZ"},{"label":"Denmark","value":"DK"},{"label":"Dominican Republic","value":"DO"},{"label":"Ecuador","value":"EC"},{"label":"Egypt","value":"EG"},{"label":"El Salvador","value":"SV"},{"label":"Estonia","value":"EE"},{"label":"Finland","value":"FI"},{"label":"France","value":"FR"},{"label":"Germany","value":"DE"},{"label":"Greece","value":"GR"},{"label":"Guatemala","value":"GT"},{"label":"Honduras","value":"HN"},{"label":"Hong Kong","value":"HK"},{"label":"Hungary","value":"HU"},{"label":"Iceland","value":"IS"},{"label":"India","value":"IN"},{"label":"Indonesia","value":"ID"},{"label":"Ireland","value":"IE"},{"label":"Israel","value":"IL"},{"label":"Italy","value":"IT"},{"label":"Japan","value":"JP"},{"label":"Jordan","value":"JO"},{"label":"Kuwait","value":"KW"},{"label":"Latvia","value":"LV"},{"label":"Lebanon","value":"LB"},{"label":"Liechtenstein","value":"LI"},{"label":"Lithuania","value":"LT"},{"label":"Luxembourg","value":"LU"},{"label":"Malaysia","value":"MY"},{"label":"Malta","value":"MT"},{"label":"Mexico","value":"MX"},{"label":"Monaco","value":"MC"},{"label":"Morocco","value":"MA"},{"label":"Netherlands","value":"NL"},{"label":"New Zealand","value":"NZ"},{"label":"Nicaragua","value":"NI"},{"label":"Norway","value":"NO"},{"label":"Oman","value":"OM"},{"label":"Palestine","value":"PS"},{"label":"Panama","value":"PA"},{"label":"Paraguay","value":"PY"},{"label":"Peru","value":"PE"},{"label":"Philippines","value":"PH"},{"label":"Poland","value":"PL"},{"label":"Portugal","value":"PT"},{"label":"Qatar","value":"QA"},{"label":"Romania","value":"RO"},{"label":"Saudi Arabia","value":"SA"},{"label":"Singapore","value":"SG"},{"label":"Slovakia","value":"SK"},{"label":"South Africa","value":"ZA"},{"label":"Spain","value":"ES"},{"label":"Sweden","value":"SE"},{"label":"Switzerland","value":"CH"},{"label":"Taiwan","value":"TW"},{"label":"Thailand","value":"TH"},{"label":"Tunisia","value":"TN"},{"label":"Turkey","value":"TR"},{"label":"United Arab Emirates","value":"AE"},{"label":"United Kingdom","value":"GB"},{"label":"United States","value":"US"},{"label":"Uruguay","value":"UY"},{"label":"Vietnam","value":"VN"}]},{"id":"timestamp","name":"Date and Time","validation":{"primitiveType":"STRING","entityType":"DATE_TIME","pattern":"yyyy-MM-ddTHH:mm:ss"}}]')},120:function(e,t,a){e.exports=a(240)},129:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){},193:function(e,t,a){},194:function(e,t,a){},195:function(e,t,a){},238:function(e,t,a){},239:function(e,t,a){},240:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(6),c=a.n(l),i=a(5),o=a(7),s=a(78),u=a(11),m=a.n(u),f=(a(129),a(15)),b=a.n(f),p=a(2),v=a(31),d=a(32),E=a.n(d);function O(e){return{type:h,playlist:e}}function y(e){return{type:j,value:e}}var h="SET_ACTIVE_PLAYLIST",g="SET_FILTERS",j="SET_AUTO_REFRESH",w=(a(147),function(e){var t=e.playlist,a=Object(o.b)(),n=Object(o.c)(function(e){return e.activePlaylist});return r.a.createElement("div",{className:"playlist".concat(n?" playlist-small":"").concat(n&&t&&t.id===n.id?" active":""),onClick:function(){return a(O(t))}},t?r.a.createElement("img",{src:t.images[0].url,width:"64px",height:"64px",alt:t.name}):r.a.createElement(m.a,{width:"64px",height:"64px"}),r.a.createElement("div",{className:"info"},r.a.createElement("div",{className:"name"},t?t.name:r.a.createElement(m.a,{width:Math.floor(60*Math.random()+61)+"px"})),t?r.a.createElement("div",null,"By ",r.a.createElement("span",{className:"owner"},t.owner.display_name)):r.a.createElement(m.a,{width:"60px"}),r.a.createElement("div",null,t?"".concat(t.tracks.total," songs"):r.a.createElement(m.a,{width:"55px"}))))}),P=a(77),k=(a(148),function(e){var t=e.offset,a=e.limit,l=e.total,c=e.setOffset,o=e.setLimit,s=e.small,u=Object(n.useState)(null),m=Object(i.a)(u,2),f=m[0],b=m[1];return r.a.createElement("div",{className:"pagination".concat(s?" small":"")},r.a.createElement(P.a,{onClick:function(){return t>=a-1&&c(t-a)},className:"arrow"+(t<a-1?" inactive":"")}),r.a.createElement("span",{className:"page-info"},"Page",r.a.createElement("div",{className:"input"},r.a.createElement("input",{type:"text",className:"page-number",value:f||Math.ceil(t/a)+1,onChange:function(e){isNaN(parseInt(e.target.value))?b(e.target.value):(c((e.target.value-1)*a),b(null))}}))," of ".concat(Math.ceil(l/a))),r.a.createElement(P.b,{onClick:function(){return t<l-a&&c(t+a)},className:"arrow ".concat(t>=l-a?" inactive":"")}),r.a.createElement("span",{className:"page-limit"}," | ",r.a.createElement("div",{className:"input"},r.a.createElement("select",{value:a,onChange:function(e){return o(e.target.value)}},r.a.createElement("option",{value:"5"},"5"),r.a.createElement("option",{value:"10"},"10"),r.a.createElement("option",{value:"20"},"20"),r.a.createElement("option",{value:"30"},"30"),r.a.createElement("option",{value:"40"},"40"),r.a.createElement("option",{value:"50"},"50")))," ","items per page"))});a(149);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(a,!0).forEach(function(t){Object(p.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var T=function(e){var t=e.setUnauthorized,a=e.accessToken,l=Object(n.useState)(""),c=Object(i.a)(l,2),s=c[0],u=c[1],m=Object(n.useState)([]),f=Object(i.a)(m,2),p=f[0],d=f[1],O=Object(n.useState)(!1),y=Object(i.a)(O,2),h=y[0],g=y[1],j=Object(n.useState)(5),P=Object(i.a)(j,2),N=P[0],T=P[1],_=Object(n.useState)(0),A=Object(i.a)(_,2),C=A[0],I=A[1],R=Object(n.useState)(0),x=Object(i.a)(R,2),L=x[0],D=x[1],U=Object(o.c)(function(e){return e.activePlaylist}),M=Object(o.c)(function(e){return e.filters}),B=Object(o.c)(function(e){return e.autoRefresh});Object(n.useEffect)(function(){var e=function(){var e=Object(v.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:g(!0),a&&E.a.get("https://api.spotify.com/v1/browse/featured-playlists",{params:S({},M,{offset:C,limit:N}),headers:{Authorization:"Bearer ".concat(a)}}).then(function(e){u(e.data.message),d(e.data.playlists.items),D(e.data.playlists.total)}).catch(function(e){t(!0)}).finally(function(){g(!1)});case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();if(e(),B){var n=setInterval(function(){e()},3e4);return function(){return clearInterval(n)}}},[M,N,C,t,a,B]),Object(n.useEffect)(function(){I(0)},[M]);var H=[];if(h)for(var z=0;z<N;z++)H.push(z);return r.a.createElement("div",{className:"playlist-container".concat(U?" active-playlist":"")},r.a.createElement("div",{className:"title"},s),r.a.createElement(k,{offset:C,limit:N,total:L,setOffset:I,setLimit:T,small:!!U}),h?H.map(function(e){return r.a.createElement(w,{key:e})}):p.map(function(e){return r.a.createElement(w,{key:e.id,playlist:e,active:U})}),r.a.createElement(k,{offset:C,limit:N,total:L,setOffset:I,setLimit:T,small:!!U}))},_=a(118);function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(a,!0).forEach(function(t){Object(p.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var I={menu:function(e){return C({},e,{color:"#000000"})},control:function(e){return C({},e,{border:"none",boxShadow:"none",minHeight:"unset"})},indicatorsContainer:function(e){return C({},e,{margin:0,padding:0,paddingLeft:"4px"})},indicatorSeparator:function(e){return C({},e,{margin:"4px 0"})},input:function(e){return C({},e,{margin:0,padding:0})},dropdownIndicator:function(e){return C({},e,{padding:0,paddingLeft:"4px"})},option:function(e,t){return C({},e,{backgroundColor:t.isSelected?"#1db954":t.isFocused&&"#1db95433",cursor:"pointer"})}},R=function(e){var t=e.id,a=e.values,n=e.onChange;return r.a.createElement(_.a,{name:t,options:a,defaultValue:{label:"United States",value:"US"},isSearchable:!0,onChange:function(e){return n({target:{id:t,value:e.value}})},styles:I})},x=a(109),L=a.n(x),D=(a(193),function(e,t){if("INTEGER"===t.primitiveType){var a=parseInt(e);if(!/^\d*$/.test(e))throw new Error("must be an integer");if(t.min&&a<t.min)throw new Error("must be at least "+t.min);if(t.max&&a>t.max)throw new Error("must be at most "+t.max)}}),U=function(e){var t=e.id,a=e.name,n=e.validation,l=e.value,c=e.onChange,i=e.setError,s=Object(o.b)();return"entityType"in n&&"DATE_TIME"===n.entityType?r.a.createElement(L.a,{value:l,onChange:function(e){s(y(!e)),c({target:{id:t,value:e}})}}):r.a.createElement("input",{type:"INTEGER"===n.primitiveType?"number":"text",id:t,value:l||"",onChange:function(e){try{D(e.target.value,n),i(null)}catch(t){i(t.message.replace("{name}",a))}finally{c(e)}}})},M=(a(194),function(e){var t=e.definition,a=e.value,l=e.onChange,c=Object(n.useState)(null),o=Object(i.a)(c,2),s=o[0],u=o[1],m={id:t.id,name:t.name,value:a,onChange:l};return r.a.createElement("div",{key:t.id,className:"filter"},r.a.createElement("div",{className:"filter-name"},t.name,r.a.createElement("span",{className:"error-message"}," ",s)),r.a.createElement("div",{className:"filter-input".concat(s?" error":"")},"values"in t?r.a.createElement(R,Object.assign({values:t.values},m)):r.a.createElement(U,Object.assign({validation:t.validation,setError:u},m))))}),B=a(110);a(195);function H(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var z=function(e){var t=e.visible,a=Object(o.c)(function(e){return e.filters}),n=Object(o.c)(function(e){return e.autoRefresh}),l=Object(o.b)(),c=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?H(a,!0).forEach(function(t){Object(p.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},a);t[e.target.id]=e.target.value,l(function(e){return{type:g,filters:e}}(t))};return r.a.createElement("div",{className:"filter-panel"+(t?" visible":"")},B.filter(function(e){return"offset"!==e.id&&"limit"!==e.id}).map(function(e){return r.a.createElement(M,{key:e.id,definition:e,value:a[e.id],onChange:c})}),r.a.createElement("div",{className:"auto-refresh"},r.a.createElement("input",{type:"checkbox",checked:n,onChange:function(e){l(y(e.target.checked))}})," ","Enable auto-refresh"))},G=a(117),F=a(119),K=(a(238),function(e){return e<1e3?e:e<1e6?Math.round(e/1e3)+"K":Math.round(e/1e6)+"M"}),J=function(e){var t=e.name,a=e.url,l=e.accessToken,c=e.setUnauthorized,o=Object(n.useState)(null),s=Object(i.a)(o,2),u=s[0],f=s[1];return Object(n.useEffect)(function(){(function(){var e=Object(v.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a&&E.a.get(a,{headers:{Authorization:"Bearer ".concat(l)}}).then(function(e){f(e.data)}).catch(function(e){401===e.response.status&&c(!0)});case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()()},[a,l,c]),r.a.createElement("div",{className:"artist-container"},u?r.a.createElement("img",{className:"artist-picture",src:u.images[0].url,alt:u.name}):r.a.createElement("div",{className:"artist-picture"},r.a.createElement(m.a,{width:"64px",height:"64px"})),r.a.createElement("div",{className:"artist-details"},r.a.createElement("div",{className:"artist-name"},t||u.name),r.a.createElement("div",{className:"artist-followers"},u?"".concat(K(u.followers.total)," followers"):r.a.createElement(m.a,{width:"88px"})),u?r.a.createElement("a",{className:"artist-link spotify-link",href:u.external_urls.spotify,target:"_blank",rel:"noopener noreferrer"},"Open on Spotify"):r.a.createElement(m.a,{width:"113px"})))},V=function(e){var t=e.track,a=e.accessToken,n=e.setUnauthorized;return t?r.a.createElement("div",{className:"track"},r.a.createElement("a",{className:"spotify-link white",title:t.name,href:t.external_urls.spotify,target:"_blank",rel:"noopener noreferrer"},"".concat(t.name.substring(0,35)).concat(t.name.length>35?"...":""))," \xb7 ",r.a.createElement("span",{className:"artist-list"},t.artists.map(function(e,l){return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{placement:"top",trigger:["click"],overlay:r.a.createElement(J,{name:e.name,url:e.href,accessToken:a,setUnauthorized:n})},r.a.createElement("span",{key:e.id,className:"artist"},e.name)),l<t.artists.length-1?", ":"")}))):r.a.createElement("div",{className:"track"},r.a.createElement(m.a,{width:Math.floor(60*Math.random()+31)+"%"}))},Y=(a(239),function(e){var t=e.setUnauthorized,a=e.accessToken,l=Object(n.useState)([]),c=Object(i.a)(l,2),s=c[0],u=c[1],m=Object(n.useState)(0),f=Object(i.a)(m,2),p=f[0],d=f[1],y=Object(n.useState)(!1),h=Object(i.a)(y,2),g=h[0],j=h[1],w=Object(n.useState)(10),P=Object(i.a)(w,2),N=P[0],S=P[1],T=Object(n.useState)(0),_=Object(i.a)(T,2),A=_[0],C=_[1],I=Object(o.c)(function(e){return e.activePlaylist}),R=Object(o.c)(function(e){return e.autoRefresh}),x=Object(o.b)();Object(n.useEffect)(function(){var e=function(){var e=Object(v.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:j(!0),I&&a&&E.a.get(I.tracks.href,{params:{offset:A,limit:N},headers:{Authorization:"Bearer ".concat(a)}}).then(function(e){u(e.data.items),d(e.data.total)}).catch(function(e){401===e.response.status&&t(!0)}).finally(function(){j(!1)});case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();if(e(),R){var n=setInterval(function(){e()},3e4);return function(){return clearInterval(n)}}},[I,t,a,N,A,R]),Object(n.useEffect)(function(){C(0)},[I]);var L=[];if(g)for(var D=0;D<N;D++)L.push(D);return I?r.a.createElement("div",{className:"track-container"},r.a.createElement("div",{className:"playlist-info"},r.a.createElement("img",{src:I.images[0].url,width:"152px",height:"152px",alt:I.name}),r.a.createElement("div",{className:"playlist-details"},r.a.createElement("div",{className:"list-type"},"Playlist \xb7"," ",r.a.createElement("a",{className:"spotify-link",href:I.external_urls.spotify,target:"_blank",rel:"noopener noreferrer"},"Open on Spotify")),r.a.createElement("div",{className:"playlist-name"},I.name),r.a.createElement("div",{className:"track-count"},"Created by"," ",r.a.createElement("a",{className:"playlist-owner spotify-link white",href:I.owner.external_urls.spotify,target:"_blank",rel:"noopener noreferrer"},I.owner.display_name)," ","\xb7 ",I.tracks.total," songs")),r.a.createElement(G.a,{className:"close-button",onClick:function(){return x(O(null))}})),r.a.createElement("div",{className:"track-list"},g?L.map(function(e){return r.a.createElement(V,{key:e})}):s.filter(function(e){return e.track&&e.track.id}).map(function(e){return r.a.createElement(V,{key:e.track.id,track:e.track,accessToken:a,setUnauthorized:t})})),r.a.createElement(k,{offset:A,limit:N,total:p,setOffset:C,setLimit:S})):r.a.createElement(r.a.Fragment,null)}),Z=a(50);function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(a,!0).forEach(function(t){Object(p.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var X={activePlaylist:null,filters:{},autoRefresh:!0};var $=Object(Z.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return W({},e,{activePlaylist:t.playlist});case g:return W({},e,{filters:t.filters});case j:return W({},e,{autoRefresh:t.value});default:return e}}),q=Object({NODE_ENV:"production",PUBLIC_URL:"/spotibrowser",REACT_APP_SPOTIFY_API_URL:"https://api.spotify.com/v1/browse/featured-playlists",REACT_APP_AUTH_API_URL:"https://accounts.spotify.com/authorize",REACT_APP_CLIENT_ID:"335ec69bb5524ecc86cea8963374de22",REACT_APP_URL:"https://yagoag.github.io/spotibrowser"}),ee=q.REACT_APP_AUTH_API_URL,te=q.REACT_APP_CLIENT_ID,ae=q.REACT_APP_URL,ne=function(){window.location="".concat(ee,"?client_id=").concat(te,"&response_type=token&redirect_uri=").concat(ae)},re=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),m=Object(i.a)(c,2),f=m[0],b=m[1],p=Object(n.useState)(null),v=Object(i.a)(p,2),d=v[0],E=v[1];return Object(n.useEffect)(function(){if(localStorage.getItem("access_token"))E(localStorage.getItem("access_token"));else{var e=window.location.hash.substr(1).split("&").reduce(function(e,t){var a=t.split("=");return e[a[0]]=a[1],e},{});e.access_token?(localStorage.setItem("access_token",e.access_token),E(e.access_token)):ne()}},[]),Object(n.useEffect)(function(){f&&(localStorage.removeItem("access_token"),ne())},[f]),r.a.createElement(o.a,{store:$},r.a.createElement(u.SkeletonTheme,{color:"#f2f2f2",highlightColor:"#777"},r.a.createElement("div",{className:"App"},r.a.createElement("div",{id:"header"},r.a.createElement("div",{className:"app-title"},"SpotiBrowser"),r.a.createElement("button",{className:"show-filters",onClick:function(){return l(!a)}},"Filters",r.a.createElement("span",{className:"arrow"},a?r.a.createElement(s.b,null):r.a.createElement(s.a,null)))),r.a.createElement(z,{visible:a}),r.a.createElement("div",{id:"contents"},r.a.createElement(T,{setUnauthorized:b,accessToken:d}),r.a.createElement(Y,{setUnauthorized:b,accessToken:d})))))};c.a.render(r.a.createElement(re,null),document.getElementById("root"))}},[[120,1,2]]]);
//# sourceMappingURL=main.51ecd628.chunk.js.map